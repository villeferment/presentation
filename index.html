<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Interaktiv Bubbla Pyramid</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background-color: #f2f2f2;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }

    .container {
      position: relative;
      width: 1000px;
      height: 800px;
    }

    .bubble {
      position: absolute;
      width: 260px;
      height: 160px;
      background-color: white;
      border-radius: 50% / 40%;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
      cursor: pointer;
      transition: all 0.6s ease;
      z-index: 1;
    }

    .bubble h3 {
      margin: 0;
      font-size: 14px;
    }

    .bubble p {
      display: none;
      font-size: 12px;
      margin-top: 10px;
      white-space: pre-line;
    }

    .bubble.active {
      width: 500px;
      height: 300px;
      z-index: 3;
    }

    .bubble.active p {
      display: block;
    }

    .bubble.minimized {
      width: 140px;
      height: 90px;
      font-size: 10px;
      z-index: 2;
    }

    #resetBtn {
      position: absolute;
      top: 20px;
      right: 20px;
      padding: 10px 20px;
      background-color: #333;
      color: white;
      border: none;
      cursor: pointer;
      z-index: 10;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <button id="resetBtn">Tillbaka</button>
    <div class="bubble" data-index="0" data-title="Bodily experience of movement"
      data-description="Embodied experience from within\nBeing in the movement\nPrior knowledge in relation to the phenomenon">
      <div class="content">
        <h3>Bodily experience of movement</h3>
        <p>Embodied experience from within\nBeing in the movement\nPrior knowledge in relation to the phenomenon</p>
      </div>
    </div>

    <div class="bubble" data-index="1" data-title="Simultaneous experience of subject-object"
      data-description="Listening with and through the body\nOpenness to oneself and the collaborative work\nAttention with and through the body">
      <div class="content">
        <h3>Simultaneous experience of subject-object</h3>
        <p>Listening with and through the body\nOpenness to oneself and the collaborative work\nAttention with and through the body</p>
      </div>
    </div>

    <div class="bubble" data-index="2" data-title="Separate and intertwined relation as an entity"
      data-description="Eye contact\nTiming\nSpeed\nDirection in space\nGracefulness">
      <div class="content">
        <h3>Separate and intertwined relation as an entity</h3>
        <p>Eye contact\nTiming\nSpeed\nDirection in space\nGracefulness</p>
      </div>
    </div>
  </div>

  <script>
    const bubbles = document.querySelectorAll('.bubble');
    const resetBtn = document.getElementById('resetBtn');

    const layoutPositions = {
      default: [
        { top: '10%', left: '50%', transform: 'translate(-50%, 0)' }, // top
        { bottom: '10%', left: '28%', transform: 'translate(-50%, 0)' }, // bottom-left
        { bottom: '10%', right: '28%', transform: 'translate(50%, 0)' } // bottom-right
      ],
      active: [
        { top: 'calc(50% - 150px)', left: 'calc(50% - 250px)', transform: 'none' },
        { top: 'calc(50% + 160px)', left: 'calc(50% - 380px)', transform: 'none' },
        { top: 'calc(50% + 160px)', left: 'calc(50% + 380px)', transform: 'none' },
      ]
    };

    function applyPosition(bubble, pos) {
      Object.assign(bubble.style, {
        top: pos.top || '',
        bottom: pos.bottom || '',
        left: pos.left || '',
        right: pos.right || '',
        transform: pos.transform || ''
      });
    }

    function resetBubbles() {
      bubbles.forEach((bubble, index) => {
        bubble.classList.remove('active', 'minimized');
        applyPosition(bubble, layoutPositions.default[index]);
        bubble.querySelector('h3').textContent = bubble.dataset.title;
      });
    }

    function activateBubble(activeIndex) {
      bubbles.forEach((bubble, index) => {
        if (index === activeIndex) {
          bubble.classList.add('active');
          bubble.classList.remove('minimized');
          applyPosition(bubble, layoutPositions.active[0]);
        } else {
          bubble.classList.remove('active');
          bubble.classList.add('minimized');
          const isLeft = index === 1;
          const pos = isLeft ? layoutPositions.active[1] : layoutPositions.active[2];
          applyPosition(bubble, pos);
        }
      });
    }

    bubbles.forEach((bubble, index) => {
      bubble.addEventListener('click', () => {
        const isActive = bubble.classList.contains('active');
        if (isActive) {
          resetBubbles();
        } else {
          activateBubble(index);
        }
      });
    });

    resetBtn.addEventListener('click', resetBubbles);

    resetBubbles();
  </script>
</body>
</html>
