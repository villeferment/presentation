<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <title>Interaktiv Bubbla Pyramid</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background-color: #f2f2f2;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
      position: relative;
    }

    .container {
      position: relative;
      width: 900px;
      height: 600px;
    }

    .bubble {
      position: absolute;
      width: 280px;
      height: 170px;
      background-color: white;
      border-radius: 50% / 40%;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
      cursor: pointer;
      transition: all 0.6s ease;
      z-index: 3;
    }

    .bubble h3 {
      margin: 0;
      font-size: 14px;
    }

    .bubble p {
      display: none;
      font-size: 12px;
      margin-top: 10px;
      white-space: pre-line; /* gör att radbrytningar visas */
    }

    .bubble.active {
      width: 500px;
      height: 300px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1;
    }

    .bubble.active p {
      display: block;
    }

    .bubble.minimized {
      width: 140px;
      height: 100px;
      font-size: 10px;
      z-index: 4;
    }

    /* Ursprunglig layout – närmare varandra nedtill */
    .bubble[data-index="0"] {
      top: 25%;
      left: 50%;
      transform: translate(-50%, 0);
    }

    .bubble[data-index="1"] {
      bottom: 20%;
      left: 25%;
      transform: translate(0, 0);
    }

    .bubble[data-index="2"] {
      bottom: 20%;
      right: 25%;
      transform: translate(0, 0);
    }

    #back-button {
      position: absolute;
      top: 20px;
      left: 20px;
      padding: 10px 15px;
      font-size: 14px;
      border: none;
      border-radius: 5px;
      background-color: #333;
      color: white;
      cursor: pointer;
      display: none;
      z-index: 10;
    }

    #back-button:hover {
      background-color: #555;
    }
  </style>
</head>
<body>
  <button id="back-button">Tillbaka</button>

  <div class="container">
    <div class="bubble" data-index="0" data-title="Separate and intertwined relation as an entity"
      data-description="Eye contact\nTiming\nSpeed\nDirection in space\nGracefulness">
      <div class="content">
        <h3>Separate and intertwined relation as an entity</h3>
        <p></p>
      </div>
    </div>

    <div class="bubble" data-index="1" data-title="Simultaneous experience of subject-object"
      data-description="Attention with and through the body\nListening with and through the body\nOpenness to oneself\nCollaborative work">
      <div class="content">
        <h3>Simultaneous experience of subject-object</h3>
        <p></p>
      </div>
    </div>

    <div class="bubble" data-index="2" data-title="Bodily experience of movement"
      data-description="Embodied experience from within\nBeing in the movement\nPrior knowledge in relation to the phenomenon">
      <div class="content">
        <h3>Bodily experience of movement</h3>
        <p></p>
      </div>
    </div>
  </div>

  <script>
    const bubbles = document.querySelectorAll('.bubble');
    const backButton = document.getElementById('back-button');

    const positions = [
      { top: '25%', left: '50%', bottom: '', right: '', transform: 'translate(-50%, 0)' },
      { top: '', left: '25%', bottom: '20%', right: '', transform: 'translate(0, 0)' },
      { top: '', left: '', bottom: '20%', right: '25%', transform: 'translate(0, 0)' }
    ];

    function resetBubbles() {
      bubbles.forEach((bub, index) => {
        bub.classList.remove('active', 'minimized');
        Object.assign(bub.style, positions[index]);
        bub.querySelector('h3').textContent = bub.dataset.title;
        bub.querySelector('p').textContent = bub.dataset.description;
      });
      backButton.style.display = 'none';
    }

    function activateBubble(activeIndex) {
      const moveOffset = 100;

      bubbles.forEach((bub, index) => {
        if (index === activeIndex) {
          bub.classList.add('active');
          bub.classList.remove('minimized');
          bub.querySelector('h3').textContent = bub.dataset.title;
          bub.querySelector('p').textContent = bub.dataset.description;
        } else {
          bub.classList.add('minimized');
          bub.classList.remove('active');

          const original = positions[index];
          let newTop = original.top;
          let newBottom = original.bottom;
          let newLeft = original.left;
          let newRight = original.right;

          if (activeIndex === 0) {
            // Klick på översta – flytta ned andra två
            if (original.top) newTop = `calc(${original.top} + ${moveOffset}px)`;
            if (original.bottom) newBottom = `calc(${original.bottom} - ${moveOffset}px)`;
          } else if (activeIndex === 2) {
            // Klick på nedre höger – flytta andra två snett uppåt vänster
            if (original.top) newTop = `calc(${original.top} - ${moveOffset}px)`;
            if (original.bottom) newBottom = `calc(${original.bottom} + ${moveOffset}px)`;
            if (original.left) newLeft = `calc(${original.left} - ${moveOffset}px)`;
            if (original.right) newRight = `calc(${original.right} + ${moveOffset}px)`;
          } else if (activeIndex === 1) {
            // Klick på nedre vänster – flytta andra två snett uppåt höger
            if (original.top) newTop = `calc(${original.top} - ${moveOffset}px)`;
            if (original.bottom) newBottom = `calc(${original.bottom} + ${moveOffset}px)`;
            if (original.left) newLeft = `calc(${original.left} + ${moveOffset}px)`;
            if (original.right) newRight = `calc(${original.right} - ${moveOffset}px)`;
          }

          Object.assign(bub.style, {
            top: newTop || '',
            bottom: newBottom || '',
            left: newLeft || '',
            right: newRight || '',
            transform: original.transform
          });
        }
      });

      backButton.style.display = 'block';
    }

    bubbles.forEach((bub, index) => {
      bub.addEventListener('click', () => {
        const isActive = bub.classList.contains('active');
        if (isActive) {
          resetBubbles();
        } else {
          activateBubble(index);
        }
      });
    });

    backButton.addEventListener('click', resetBubbles);

    resetBubbles();
  </script>
</body>
</html>
